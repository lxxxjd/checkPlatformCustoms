(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{mAdp:function(e,a,t){"use strict";t.r(a);var l,r,s,n,o=t("jehZ"),i=t.n(o),c=t("p0pE"),u=t.n(c),d=t("2Taf"),m=t.n(d),p=t("vZ4D"),E=t.n(p),f=t("MhPg"),b=t.n(f),v=t("l4Ni"),h=t.n(v),g=t("ujKo"),C=t.n(g),y=t("q1tI"),w=t.n(y),k=t("MuoO"),S=t("Y2fQ"),F=t("bmkC"),V=t("zHco"),M=t("wd/R"),I=t.n(M),D=t("glGN"),O=t.n(D);function q(e){return function(){var a,t=C()(e);if(U()){var l=C()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return h()(this,a)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var x=F["Form"].Item,N=F["Select"].Option,R=F["Form"].create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleEdit,r=e.handleModalVisible,s=e.modalInfo,n=e.customsOptions,o=function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a,s))})};return w.a.createElement(F["Modal"],{destroyOnClose:!0,title:"\u7528\u6237\u4fe1\u606f\u4fee\u6539",style:{top:10},visible:a,onOk:o,onCancel:function(){return r()}},w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7528\u6237\u540d"},t.getFieldDecorator("username",{initialValue:s.username,rules:[{required:!0,message:Object(S["formatMessage"])({id:"validation.username.required"})}]})(w.a.createElement(F["Input"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",disabled:!0}))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u624b\u673a"},t.getFieldDecorator("tel",{initialValue:s.tel,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a"}]})(w.a.createElement(F["Input"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a"}))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u53ef\u89c1\u6027"},t.getFieldDecorator("isvisible",{initialValue:s.isvisible,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u624b\u673a\u53ef\u89c1\u6027"}]})(w.a.createElement(F["Select"],{placeholder:"\u8bf7\u9009\u62e9\u53ef\u89c1\u6027",style:{width:"100%"}},w.a.createElement(N,{value:"\u53ef\u89c1"},"\u53ef\u89c1"),w.a.createElement(N,{value:"\u4e0d\u53ef\u89c1"},"\u4e0d\u53ef\u89c1")))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6240\u5728\u5355\u4f4d"},t.getFieldDecorator("company",{initialValue:s.company,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6240\u5728\u5355\u4f4d"}]})(w.a.createElement(F["Select"],{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u6240\u5728\u5355\u4f4d"},n))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u804c\u4f4d"},t.getFieldDecorator("workduty",{initialValue:s.workduty,rules:[{required:!0,message:"\u804c\u4f4d"}]})(w.a.createElement(F["Select"],{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u516c\u53f8\u804c\u4f4d"},w.a.createElement(N,{value:"\u5173\u957f"},"\u5173\u957f"),w.a.createElement(N,{value:"\u526f\u5173\u957f"},"\u526f\u5173\u957f"),w.a.createElement(N,{value:"\u5904\u957f"},"\u5904\u957f"),w.a.createElement(N,{value:"\u526f\u5904\u957f"},"\u526f\u5904\u957f"),w.a.createElement(N,{value:"\u79d1\u957f"},"\u79d1\u957f"),w.a.createElement(N,{value:"\u526f\u79d1\u957f"},"\u526f\u79d1\u957f"),w.a.createElement(N,{value:"\u79d1\u5458"},"\u79d1\u5458"),w.a.createElement(N,{value:"\u529e\u4e8b\u5458"},"\u529e\u4e8b\u5458")))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u89d2\u8272"},t.getFieldDecorator("role",{initialValue:s.role,rules:[{required:!0,message:"\u89d2\u8272"}]})(w.a.createElement(F["Select"],{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272\uff0c\u53ef\u4ee5\u9009\u62e9\u4e00\u9879\u6216\u591a\u9879",mode:"tags"},w.a.createElement(N,{value:"\u7ba1\u7406\u5458"},"\u7ba1\u7406\u5458"),w.a.createElement(N,{value:"\u5ba1\u67e5\u5458"},"\u5ba1\u67e5\u5458")))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba1\u6838\u72b6\u6001"},t.getFieldDecorator("ispass",{initialValue:s.ispass,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u6838\u72b6\u6001"}]})(w.a.createElement(F["Select"],{placeholder:"\u8bf7\u9009\u62e9\u5ba1\u6838\u72b6\u6001",style:{width:"100%"}},w.a.createElement(N,{value:"\u901a\u8fc7"},"\u901a\u8fc7"),w.a.createElement(N,{value:"\u4e0d\u901a\u8fc7"},"\u4e0d\u901a\u8fc7")))))}),j=F["Form"].create()(function(e){var a=e.addModalVisible,t=e.form,l=e.handleAdd,r=e.addHandleModalVisible,s=e.dispatch,n=e.customsOptions,o=function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})},i=function(e,a,t){s({type:"CustomsUser/getRepeatUsername",payload:{username:a},callback:function(e){void 0===e||"error"===e?t(Object(S["formatMessage"])({id:"validation.userExist.error"})):"repeat"===e?t(Object(S["formatMessage"])({id:"validation.userExist.repeated"})):t()}})};return w.a.createElement(F["Modal"],{destroyOnClose:!0,title:"\u7528\u6237\u4fe1\u606f\u65b0\u589e",style:{top:10},visible:a,onOk:o,onCancel:function(){return r()}},w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7528\u6237\u540d"},t.getFieldDecorator("username",{rules:[{required:!0,message:Object(S["formatMessage"])({id:"validation.username.required"})},{validator:i}]})(w.a.createElement(F["Input"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u59d3\u540d"},t.getFieldDecorator("nameC",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(w.a.createElement(F["Input"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u624b\u673a"},t.getFieldDecorator("tel",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a"}]})(w.a.createElement(F["Input"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a"}))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u53ef\u89c1\u6027"},t.getFieldDecorator("isvisible",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u624b\u673a\u53ef\u89c1\u6027"}]})(w.a.createElement(F["Select"],{placeholder:"\u8bf7\u9009\u62e9\u53ef\u89c1\u6027",style:{width:"100%"}},w.a.createElement(N,{value:"\u53ef\u89c1"},"\u53ef\u89c1"),w.a.createElement(N,{value:"\u4e0d\u53ef\u89c1"},"\u4e0d\u53ef\u89c1")))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6240\u5728\u5355\u4f4d"},t.getFieldDecorator("company",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6240\u5728\u5355\u4f4d"}]})(w.a.createElement(F["Select"],{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u6240\u5728\u5355\u4f4d"},n))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u804c\u4f4d"},t.getFieldDecorator("workduty",{rules:[{required:!0,message:"\u804c\u4f4d"}]})(w.a.createElement(F["Select"],{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u516c\u53f8\u804c\u4f4d"},w.a.createElement(N,{value:"\u5173\u957f"},"\u5173\u957f"),w.a.createElement(N,{value:"\u526f\u5173\u957f"},"\u526f\u5173\u957f"),w.a.createElement(N,{value:"\u5904\u957f"},"\u5904\u957f"),w.a.createElement(N,{value:"\u526f\u5904\u957f"},"\u526f\u5904\u957f"),w.a.createElement(N,{value:"\u79d1\u957f"},"\u79d1\u957f"),w.a.createElement(N,{value:"\u526f\u79d1\u957f"},"\u526f\u79d1\u957f"),w.a.createElement(N,{value:"\u79d1\u5458"},"\u79d1\u5458"),w.a.createElement(N,{value:"\u529e\u4e8b\u5458"},"\u529e\u4e8b\u5458")))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u89d2\u8272"},t.getFieldDecorator("role",{rules:[{required:!0,message:"\u89d2\u8272"}]})(w.a.createElement(F["Select"],{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272\uff0c\u53ef\u4ee5\u9009\u62e9\u4e00\u9879\u6216\u591a\u9879",mode:"tags"},w.a.createElement(N,{value:"\u7ba1\u7406\u5458"},"\u7ba1\u7406\u5458"),w.a.createElement(N,{value:"\u5ba1\u67e5\u5458"},"\u5ba1\u67e5\u5458")))),w.a.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba1\u6838\u72b6\u6001"},t.getFieldDecorator("ispass",{initialValue:"\u901a\u8fc7",rules:[{required:!0,message:"\u8bf7\u5ba1\u6838"}]})(w.a.createElement(F["Select"],{placeholder:"\u8bf7\u5ba1\u6838",style:{width:"100%"}},w.a.createElement(N,{value:"\u901a\u8fc7"},"\u901a\u8fc7"),w.a.createElement(N,{value:"\u4e0d\u901a\u8fc7"},"\u4e0d\u901a\u8fc7")))))}),B=(l=Object(k["connect"])(function(e){var a=e.CustomsUser,t=e.loading;return{CustomsUser:a,loading:t.models.CustomsUser}}),r=F["Form"].create(),l(s=r((n=function(e){b()(t,e);var a=q(t);function t(){var e;m()(this,t);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return e=a.call.apply(a,[this].concat(r)),e.state={modalVisible:!1,addModalVisible:!1,modalInfo:{},dataSource:[],customs:[]},e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u59d3\u540d",dataIndex:"nameC"},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"tel"},{title:"\u6240\u5728\u5355\u4f4d",dataIndex:"company"},{title:"\u89d2\u8272",dataIndex:"role"},{title:"\u64cd\u4f5c",render:function(a,t){return w.a.createElement(y["Fragment"],null,w.a.createElement("a",{onClick:function(){return e.resetPassword(a,t)}},"\u91cd\u7f6e\u5bc6\u7801  \xa0\xa0"),w.a.createElement("a",{onClick:function(){return e.modifyItem(a,t)}},"\u4fee\u6539  \xa0\xa0"),w.a.createElement("a",{onClick:function(){return e.deleteItem(a,t)}},"\u5220\u9664"))}}],e.init=function(){var a=e.props.dispatch,t=JSON.parse(localStorage.getItem("customs_userinfo")),l={customsCompany:t.company};a({type:"CustomsUser/getCustomsUserListByCustomName",payload:l,callback:function(a){200===a.code&&(e.state.dataSource=a.data)}}),a({type:"CustomsUser/getCustomsNameStringByCustomName",payload:l,callback:function(a){200===a.code&&(e.state.customs=a.data)}})},e.handleFormReset=function(){var a=e.props.form;a.resetFields(),e.init()},e.handleSearch=function(a){a.preventDefault();var t=e.props,l=t.dispatch,r=t.form,s=JSON.parse(localStorage.getItem("customs_userinfo"));r.validateFields(function(a,t){if(!a){var r={kind:t.kind.trim(),value:t.value.trim(),customsCompany:s.company};l({type:"CustomsUser/getCustomsUserListByCustomName",payload:r,callback:function(a){a&&(e.state.dataSource=a.data)}})}})},e.isValidDate=function(e){return void 0!==e&&null!==e?w.a.createElement("span",null,I()(e).format("YYYY-MM-DD")):[]},e.modifyItem=function(a){var t=Object.assign({},a);if(void 0!==t.role&&null!==t.role){var l=t.role.split(" ");t.role=l}else t.role=[];e.setState({modalInfo:t}),e.handleModalVisible(!0)},e.resetPassword=function(a){var t=e.props.dispatch,l=u()({},a);l.password=l.tel.substring(5,11),console.log(l),F["Modal"].confirm({title:"\u786e\u5b9a\u91cd\u7f6e\u5bc6\u7801\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"CustomsUser/resetPassword",payload:l,callback:function(a){"success"===a?(F["message"].success("\u91cd\u7f6e\u6210\u529f"),e.init()):F["message"].success("\u91cd\u7f6e\u5931\u8d25")}})}})},e.deleteItem=function(a){var t=e.props.dispatch,l=u()({},a);F["Modal"].confirm({title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"CustomsUser/deleteCustomsUser",payload:l,callback:function(a){"success"===a?(e.init(),F["message"].success("\u5220\u9664\u6210\u529f")):F["message"].success("\u5220\u9664\u5931\u8d25")}})}})},e.addItem=function(){e.addHandleModalVisible(!0)},e.handleModalVisible=function(a){e.setState({modalVisible:!!a})},e.addHandleModalVisible=function(a){e.setState({addModalVisible:!!a})},e.handleEdit=function(a,t){var l=e.props.dispatch,r=t;r.username=a.username,r.isvisible=a.isvisible,r.tel=a.tel,r.company=a.company,r.nameC=a.nameC,r.ispass=a.ispass,r.workduty=a.workduty,r.role=a.role;var s=u()({},r);l({type:"CustomsUser/updateCustomsUser",payload:s,callback:function(a){"success"===a?(F["message"].success("\u4fdd\u5b58\u6210\u529f"),e.init()):F["message"].success("\u4fdd\u5b58\u5931\u8d25")}}),e.setState({modalVisible:!1})},e.handleAdd=function(a){var t=e.props.dispatch,l=u()({},a,{password:a.tel.substring(5,11)});e.setState({addModalVisible:!1}),e.state.dataSource.find(function(e){return e.username===a.username})?F["message"].success("\u6dfb\u52a0\u7528\u6237\u5df2\u5b58\u5728"):t({type:"CustomsUser/addCustomsUser",payload:l,callback:function(a){"success"===a?(F["message"].success("\u4fdd\u5b58\u6210\u529f"),e.init()):F["message"].success("\u4fdd\u5b58\u5931\u8d25")}})},e}return E()(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return w.a.createElement(F["Form"],{onSubmit:this.handleSearch,layout:"inline"},w.a.createElement(F["Row"],{gutter:{md:8,lg:24,xl:48}},w.a.createElement(F["Col"],{md:3,sm:20},w.a.createElement(F["Form"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{initialValue:"username",rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(w.a.createElement(F["Select"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},w.a.createElement(N,{value:"username"},"\u7528\u6237\u540d"),w.a.createElement(N,{value:"nameC"},"\u59d3\u540d"),w.a.createElement(N,{value:"password"},"\u5bc6\u7801"),w.a.createElement(N,{value:"isvisible"},"\u7535\u8bdd\u53ef\u89c1\u6027"),w.a.createElement(N,{value:"tel"},"\u7535\u8bdd"),w.a.createElement(N,{value:"company"},"\u6240\u5728\u5355\u4f4d\u540d\u79f0"))))),w.a.createElement(F["Col"],{md:6,sm:20},w.a.createElement(x,null,e("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(w.a.createElement(F["Input"],{placeholder:"\u8bf7\u8f93\u5165"})))),w.a.createElement(F["Col"],{md:8,sm:20},w.a.createElement("span",{className:O.a.submitButtons},w.a.createElement(F["Button"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),w.a.createElement(F["Button"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),w.a.createElement(F["Button"],{type:"primary",style:{marginLeft:8},onClick:this.addItem},"\u65b0\u589e")))))}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.dispatch,l=this.state,r=l.modalVisible,s=l.modalInfo,n=l.addModalVisible,o=l.dataSource,c=l.customs,u={handleEdit:this.handleEdit,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,addHandleModalVisible:this.addHandleModalVisible},d=c.map(function(e){return w.a.createElement(N,{key:e,value:e},e)});return w.a.createElement(V["a"],null,w.a.createElement(F["Card"],{bordered:!1,size:"small"},w.a.createElement("div",{className:O.a.tableList},w.a.createElement(R,i()({},u,{modalVisible:r,modalInfo:s,dispatch:t,customsOptions:d})),w.a.createElement(j,i()({},u,{addModalVisible:n,dispatch:t,customsOptions:d})),w.a.createElement("div",{className:O.a.tableListForm},this.renderSimpleForm()),w.a.createElement(F["Table"],{size:"middle",loading:a,dataSource:o,columns:this.columns,rowKey:"itemno",pagination:{showQuickJumper:!0,showSizeChanger:!0}}))))}}]),t}(y["PureComponent"]),s=n))||s)||s);a["default"]=B}}]);