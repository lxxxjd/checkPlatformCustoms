(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{IlPR:function(e,a,t){"use strict";t.r(a);t("IzEo");var n,o,s,l,i,r,c,d=t("bx4M"),m=(t("5NDa"),t("5rEg")),p=(t("g9YV"),t("wCAj")),u=(t("14J3"),t("BMrR")),g=(t("+L6B"),t("2/Rp")),y=(t("Pwec"),t("CtXQ")),h=(t("jCWc"),t("kPKH")),f=(t("2qtc"),t("kLXV")),S=(t("/xke"),t("TeRw")),v=t("eHn4"),I=t.n(v),E=t("2Taf"),w=t.n(E),C=t("vZ4D"),k=t.n(C),x=t("l4Ni"),D=t.n(x),b=t("ujKo"),A=t.n(b),K=t("MhPg"),R=t.n(K),M=(t("OaEy"),t("2fM7")),F=(t("y8nQ"),t("Vl3Y")),O=t("q1tI"),N=t.n(O),z=t("MuoO"),L=t("usdK"),J=t("zHco"),B=t("WXOI"),V=t.n(B),T=t("p0pE"),Q=t.n(T),P=t("7Dzn"),j=t.n(P),q=F["a"].Item,_=M["a"].Option,H=(n=Object(z["connect"])(function(e){var a=e.inspectionAnalysis,t=e.loading;return{inspectionAnalysis:a,loading:t.models.inspectionAnalysis}}),n((s=function(e){function a(){var e,t;w()(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=D()(this,(e=A()(a)).call.apply(e,[this].concat(o))),t.handleSearch=function(e){e.preventDefault();var a=t.props,n=a.dispatch,o=a.form,s=a.cargoname,l=sessionStorage.getItem("SampleIndex_certCode");o.validateFields(function(e,a){if(console.log(e),!e){var t=Q()({},a,{cargoname:s,certCode:l});n({type:"inspectionAnalysis/getSamplesByFilter",payload:t})}})},t.handleFormReset=function(){var e=t.props,a=e.form,n=e.applicant,o=e.cargoname;a.resetFields();JSON.parse(localStorage.getItem("customs_userinfo"));var s=sessionStorage.getItem("SampleIndex_certCode"),l=t.props.dispatch;l({type:"inspectionAnalysis/getSamplesByFilter",payload:{kind:"applicant",value:n,cargoname:o,certCode:s}})},t}return R()(a,e),k()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return N.a.createElement(F["a"],{onSubmit:this.handleSearch,layout:"inline",style:{marginBottom:5}},N.a.createElement(u["a"],{gutter:{md:8,lg:24,xl:48}},N.a.createElement(h["a"],{span:6},N.a.createElement(F["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{initialValue:"applicant",rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(N.a.createElement(M["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},N.a.createElement(_,{value:"applicant"},"\u59d4\u6258\u4eba"),N.a.createElement(_,{value:"shipname"},"\u8239\u540d"),N.a.createElement(_,{value:"sampleno"},"\u6837\u54c1\u7f16\u53f7"),N.a.createElement(_,{value:"samplename"},"\u6837\u54c1\u540d\u79f0"))))),N.a.createElement(h["a"],{span:8},N.a.createElement(q,null,e("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(N.a.createElement(m["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),N.a.createElement(h["a"],{md:8,sm:20},N.a.createElement("span",{className:j.a.submitButtons},N.a.createElement(g["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),N.a.createElement(g["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}}]),a}(O["PureComponent"]),o=s))||o),X=H,W=(F["a"].Item,M["a"].Option),Y=F["a"].create()(X),Z=(l=Object(z["connect"])(function(e){var a=e.inspectionAnalysis,t=e.loading;return{inspectionAnalysis:a,loading:t.models.inspectionAnalysis}}),i=F["a"].create(),l(r=i((c=function(e){function a(){var e,t;w()(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=D()(this,(e=A()(a)).call.apply(e,[this].concat(o))),t.state={formValues:{},addMany:!1,modify:!1,onDelete:!1,selectedRowKeys:[],deleteRowKeys:[],data:[],standard:[],itemName:[],onLoad:!1,onDetail:!1,testDetail:null,orfixed:!1},t.columns=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"teststandard"},{title:"\u5355\u4f4d",dataIndex:"unit"},{title:"\u53c2\u8003\u503c",dataIndex:"refervalue1"},{title:"\u6bd4\u8f83\u65b9\u6cd5",dataIndex:"calway1"},{title:"\u4e0a\u4e0b\u6d6e\u52a8",dataIndex:"rangevalue1"},{title:"\u5f3a\u5236",dataIndex:"orFixed"},{title:"\u64cd\u4f5c",render:function(e,a){return N.a.createElement(O["Fragment"],null,N.a.createElement("a",{onClick:function(){return t.modifyItem(e,a)}},"\u8bbe\u5b9a \xa0\xa0"))}}],t.columns2=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"teststandard"},{title:"\u5355\u4f4d",dataIndex:"unit"},{title:"\u53c2\u8003\u503c",dataIndex:"refervalue1"},{title:"\u6bd4\u8f83\u65b9\u6cd5",dataIndex:"calway1"},{title:"\u4e0a\u4e0b\u6d6e\u52a8",dataIndex:"rangevalue1"},{title:"\u5f3a\u5236",dataIndex:"orFixed"}],t.modifyItem=function(e){var a=t.props,n=a.dispatch,o=a.form,s=sessionStorage.getItem("cargoname");JSON.parse(localStorage.getItem("customs_userinfo"));n({type:"inspectionAnalysis/getTestStandard",payload:{cargoname:s,item:e.itemC}}),o.setFieldsValue(I()({},"refervalue1",e.refervalue1)),o.setFieldsValue(I()({},"rangevalue1",e.rangevalue1)),o.setFieldsValue(I()({},"calway1",e.calway1)),t.setState({testDetail:e}),"\u662f"===e.orFixed?t.setState({orfixed:!0}):t.setState({orfixed:!1}),t.setState({modify:!0})},t.modify=function(e){var a=t.state.testDetail,n=t.props,o=n.dispatch,s=n.form;o({type:"inspectionAnalysis/getDetailByKeyno",payload:{keyno:a.keyno},callback:function(e){if(200===e.code){var a=e.data;s.validateFields(function(e,n){e||(a.refervalue1=n.refervalue1,a.calway1=n.calway1,a.rangevalue1=n.rangevalue1,o({type:"inspectionAnalysis/modifyDetail",payload:a,callback:function(e){200===e.code?(S["a"].open({message:"\u4fee\u6539\u6210\u529f"}),t.componentDidMount()):S["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:e.message})}}))}),s.resetFields(),t.setState({modify:!1})}else S["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:e.message})}})},t.deleteOne=function(e){f["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\u6b64\u6307\u6807\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var a=t.props.dispatch;a({type:"inspectionAnalysis/deleteDetailItem",payload:{keyno:e.keyno},callback:function(e){200===e.code?(t.componentDidMount(),S["a"].open({message:"\u5220\u9664\u6210\u529f"})):S["a"].open({message:"\u5220\u9664\u5931\u8d25",description:e.data})}})}})},t.deleteItem=function(e){var a=t.props.dispatch,n=[];n.push(e.keyno),a({type:"inspectionAnalysis/deleteDetails",payload:{deleteRowKeys:n},callback:function(e){200===e.code?(t.componentDidMount(),S["a"].open({message:"\u5220\u9664\u6210\u529f"})):S["a"].open({message:"\u5220\u9664\u5931\u8d25",description:e.data})}})},t.loadItem=function(e){var a=t.props.dispatch,n=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("sampleno"),s=sessionStorage.getItem("cargoname");a({type:"inspectionAnalysis/loadDetails",payload:{targetReportNo:n,targetSampleNo:o,sourceReportNo:e.reportno,sourceSampleNo:e.sampleno,cargonameC:s},callback:function(e){200===e.code?(t.componentDidMount(),S["a"].open({message:"\u5bfc\u5165\u6210\u529f"})):S["a"].open({message:"\u5bfc\u5165\u5931\u8d25",description:e.message})}}),t.handleCancel()},t.detailItem=function(e){var a=t.props.dispatch,n=e.reportno,o=e.sampleno;a({type:"inspectionAnalysis/getDetails",payload:{reportno:n,sampleno:o}}),t.setState({onDetail:!0})},t.columns3=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"standard"},{title:"\u5355\u4f4d",dataIndex:"unit"},{title:"\u53c2\u8003\u503c",dataIndex:"refervalue1"},{title:"\u6bd4\u8f83\u65b9\u6cd5",dataIndex:"calway1"},{title:"\u4e0a\u4e0b\u6d6e\u52a8",dataIndex:"rangevalue1"},{title:"\u662f\u5426\u5f3a\u5236",dataIndex:"orFixed"}],t.back=function(){L["a"].push({pathname:"/Main/SampleIndex"})},t.handleCancel=function(){t.setState({modify:!1}),t.setState({addMany:!1}),t.setState({onDelete:!1}),t.setState({onLoad:!1}),t.componentDidMount()},t.handleCancelDetail=function(){t.setState({onDetail:!1})},t.showAddMany=function(){var e=t.props,a=e.dispatch,n=(e.form,sessionStorage.getItem("reportno")),o=sessionStorage.getItem("sampleno"),s=sessionStorage.getItem("cargoname");t.setState({addMany:!0}),a({type:"inspectionAnalysis/getItems",payload:{reportno:n,sampleno:o,cargonameC:s}}),t.setState({selectedRowKeys:[]})},t.showDelete=function(){t.setState({onDelete:!0}),t.setState({deleteRowKeys:[]})},t.onSelectChange=function(e){t.setState({selectedRowKeys:e})},t.onDeleteChange=function(e){t.setState({deleteRowKeys:e})},t.delete=function(){var e=t.state.deleteRowKeys,a=t.props.dispatch;a({type:"inspectionAnalysis/deleteDetails",payload:{deleteRowKeys:e},callback:function(e){200===e.code?(t.componentDidMount(),S["a"].open({message:"\u5220\u9664\u6210\u529f"})):S["a"].open({message:"\u5220\u9664\u5931\u8d25",description:e.data})}}),t.setState({onDelete:!1})},t.handleChange=function(e){var a=t.props,n=a.dispatch,o=a.form,s=sessionStorage.getItem("cargoname");n({type:"inspectionAnalysis/getStandards",payload:{itemC:e,cargonameC:s},callback:function(e){t.setState({standard:e.data})}}),o.setFieldsValue({standard:null})},t.addMany=function(){var e=sessionStorage.getItem("reportno"),a=sessionStorage.getItem("sampleno"),n=sessionStorage.getItem("cargoname"),o=t.state.selectedRowKeys,s=t.props,l=s.dispatch;s.inspectionAnalysis.items;l({type:"inspectionAnalysis/addDetails",payload:{reportno:e,sampleno:a,cargonameC:n,selectedRowKeys:o},callback:function(e){200===e.code?(S["a"].open({message:"\u6dfb\u52a0\u6210\u529f"}),t.componentDidMount()):S["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:e.data})}}),t.setState({addMany:!1})},t.showLoad=function(){t.setState({onLoad:!0});var e=sessionStorage.getItem("applicant"),a=sessionStorage.getItem("cargoname"),n=sessionStorage.getItem("SampleIndex_certCode"),o=t.props.dispatch;o({type:"inspectionAnalysis/getSamplesByFilter",payload:{kind:"applicant",value:e,cargoname:a,certCode:n}})},t}return R()(a,e),k()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,a=sessionStorage.getItem("reportno"),t=sessionStorage.getItem("sampleno");e({type:"inspectionAnalysis/getAllDetails",payload:{reportno:a,sampleno:t}})}},{key:"render",value:function(){var e=this.props,a=e.inspectionAnalysis,t=a.detail,n=a.items,o=a.reportSample,s=a.details,l=a.testStandards,i=e.loading,r=e.form.getFieldDecorator,c=this.state,S=c.addMany,v=c.onDelete,I=c.selectedRowKeys,E=c.standard,w=c.itemName,C=c.deleteRowKeys,k=c.onLoad,x=c.onDetail,D=c.modify,b=(l.map(function(e){return N.a.createElement(W,{key:e.standard,value:e.standard},e.standard)}),sessionStorage.getItem("reportno")),A=sessionStorage.getItem("cargoname"),K=sessionStorage.getItem("sampleno"),R=sessionStorage.getItem("applicant"),O={reportno:b,cargoname:A,sampleno:K,applicant:R},z=(E.map(function(e){return N.a.createElement(W,{key:e,value:e},e)}),w.map(function(e){return N.a.createElement(W,{key:e,value:e},e)}),{selectedRowKeys:I,onChange:this.onSelectChange}),L={deleteRowKeys:C,onChange:this.onDeleteChange};return N.a.createElement(J["a"],{text:O},N.a.createElement(d["a"],{bordered:!1},N.a.createElement(u["a"],null,N.a.createElement(h["a"],{sm:22}),N.a.createElement(h["a"],{span:2},N.a.createElement(g["a"],{type:"primary",style:{marginLeft:8,paddingLeft:0,paddingRight:15,marginBottom:5},onClick:this.back},N.a.createElement(y["a"],{type:"left"}),"\u8fd4\u56de"))),N.a.createElement("div",{className:V.a.tableList},N.a.createElement(p["a"],{size:"middle",loading:i,dataSource:t,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns,rowKey:"reportno"})),N.a.createElement(f["a"],{title:"\u6279\u91cf\u6dfb\u52a0",visible:S,onOk:this.addMany,onCancel:this.handleCancel,width:1e3,okText:"\u6dfb\u52a0"},N.a.createElement(p["a"],{size:"middle",rowKey:"keyno",loading:i,dataSource:n,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns3,rowSelection:z})),N.a.createElement(f["a"],{title:"\u5220\u9664",visible:v,onOk:this.delete,onCancel:this.handleCancel,width:1e3,okText:"\u5220\u9664"},N.a.createElement(p["a"],{size:"middle",rowKey:"keyno",loading:i,dataSource:t,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns2,rowSelection:L})),N.a.createElement(f["a"],{title:"\u5bfc\u5165",visible:k,onOk:this.handleCancel,onCancel:this.handleCancel,width:1e3},N.a.createElement("div",{className:V.a.tableListForm},N.a.createElement(Y,{applicant:R,cargoname:A})),N.a.createElement(p["a"],{size:"middle",rowKey:"keyno",loading:i,dataSource:o,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns1})),N.a.createElement(f["a"],{title:"\u8bbe\u5b9a\u76d1\u7ba1\u8981\u6c42",visible:D,onOk:this.modify,onCancel:this.handleCancel,width:400},N.a.createElement(F["a"],null,N.a.createElement(F["a"].Item,{label:"\u53c2\u8003\u503c"},r("refervalue1",{rules:[{type:"number",required:!0,transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6570\u5b57\u6216\u8005\u5c0f\u6570"}]})(N.a.createElement(m["a"],{disabled:this.state.orfixed}))),N.a.createElement(F["a"].Item,{label:"\u6bd4\u8f83\u65b9\u6cd5"},r("calway1",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u6bd4\u8f83\u65b9\u6cd5"}]})(N.a.createElement(M["a"],{placeholder:"\u8bf7\u9009\u62e9\u6bd4\u8f83\u65b9\u6cd5",disabled:this.state.orfixed},N.a.createElement(W,{value:"\u5c0f\u4e8e"},"\u5c0f\u4e8e"),N.a.createElement(W,{value:"\u5c0f\u4e8e\u7b49\u4e8e"},"\u5c0f\u4e8e\u7b49\u4e8e"),N.a.createElement(W,{value:"\u5927\u4e8e"},"\u5927\u4e8e"),N.a.createElement(W,{value:"\u5927\u4e8e\u7b49\u4e8e"},"\u5927\u4e8e\u7b49\u4e8e"),N.a.createElement(W,{value:"\u7b49\u4e8e"},"\u7b49\u4e8e"),N.a.createElement(W,{value:"\u8303\u56f4\u5185"},"\u8303\u56f4\u5185")))),N.a.createElement(F["a"].Item,{label:"\u5141\u8bb8\u6d6e\u52a8"},r("rangevalue1",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6570\u503c"}]})(N.a.createElement(m["a"],{disabled:this.state.orfixed}))))),N.a.createElement(f["a"],{title:"\u6307\u6807\u8be6\u60c5",visible:x,onCancel:this.handleCancelDetail,footer:null,width:900},N.a.createElement(p["a"],{size:"middle",rowKey:"keyno",loading:i,dataSource:s,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns3}))))}}]),a}(O["PureComponent"]),r=c))||r)||r);a["default"]=Z}}]);