(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{IlPR:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,o,s,l=a("bx4M"),i=(a("5NDa"),a("5rEg")),r=(a("g9YV"),a("wCAj")),c=(a("14J3"),a("BMrR")),d=(a("+L6B"),a("2/Rp")),m=(a("Pwec"),a("CtXQ")),p=(a("jCWc"),a("kPKH")),u=(a("2qtc"),a("kLXV")),g=(a("/xke"),a("TeRw")),y=a("eHn4"),f=a.n(y),h=a("2Taf"),v=a.n(h),S=a("vZ4D"),I=a.n(S),E=a("MhPg"),w=a.n(E),C=a("l4Ni"),k=a.n(C),x=a("ujKo"),D=a.n(x),R=(a("OaEy"),a("2fM7")),b=(a("y8nQ"),a("Vl3Y")),A=a("q1tI"),K=a.n(A),M=a("MuoO"),F=a("3a4m"),O=a.n(F),z=a("zHco"),N=a("WXOI"),L=a.n(N),J=a("p0pE"),B=a.n(J),V=a("7Dzn"),P=a.n(V);function T(e){return function(){var t,a=D()(e);if(Q()){var n=D()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return k()(this,t)}}function Q(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var j,q,_,H,X=b["a"].Item,W=R["a"].Option,Y=(n=Object(M["connect"])(function(e){var t=e.inspectionAnalysis,a=e.loading;return{inspectionAnalysis:t,loading:a.models.inspectionAnalysis}}),n((s=function(e){w()(a,e);var t=T(a);function a(){var e;v()(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),e.handleSearch=function(t){t.preventDefault();var a=e.props,n=a.dispatch,o=a.form,s=a.cargoname,l=sessionStorage.getItem("SampleIndex_certCode");o.validateFields(function(e,t){if(console.log(e),!e){var a=B()({},t,{cargoname:s,certCode:l});n({type:"inspectionAnalysis/getSamplesByFilter",payload:a})}})},e.handleFormReset=function(){var t=e.props,a=t.form,n=t.applicant,o=t.cargoname;a.resetFields();JSON.parse(localStorage.getItem("customs_userinfo"));var s=sessionStorage.getItem("SampleIndex_certCode"),l=e.props.dispatch;l({type:"inspectionAnalysis/getSamplesByFilter",payload:{kind:"applicant",value:n,cargoname:o,certCode:s}})},e}return I()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return K.a.createElement(b["a"],{onSubmit:this.handleSearch,layout:"inline",style:{marginBottom:5}},K.a.createElement(c["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(p["a"],{span:6},K.a.createElement(b["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{initialValue:"applicant",rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(K.a.createElement(R["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},K.a.createElement(W,{value:"applicant"},"\u59d4\u6258\u4eba"),K.a.createElement(W,{value:"shipname"},"\u8239\u540d"),K.a.createElement(W,{value:"sampleno"},"\u6837\u54c1\u7f16\u53f7"),K.a.createElement(W,{value:"samplename"},"\u6837\u54c1\u540d\u79f0"))))),K.a.createElement(p["a"],{span:8},K.a.createElement(X,null,e("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(K.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),K.a.createElement(p["a"],{md:8,sm:20},K.a.createElement("span",{className:P.a.submitButtons},K.a.createElement(d["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),K.a.createElement(d["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}}]),a}(A["PureComponent"]),o=s))||o),Z=Y;function G(e){return function(){var t,a=D()(e);if(U()){var n=D()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return k()(this,t)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}b["a"].Item;var $=R["a"].Option,ee=b["a"].create()(Z),te=(j=Object(M["connect"])(function(e){var t=e.inspectionAnalysis,a=e.loading;return{inspectionAnalysis:t,loading:a.models.inspectionAnalysis}}),q=b["a"].create(),j(_=q((H=function(e){w()(a,e);var t=G(a);function a(){var e;v()(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),e.state={formValues:{},addMany:!1,modify:!1,onDelete:!1,selectedRowKeys:[],deleteRowKeys:[],data:[],standard:[],itemName:[],onLoad:!1,onDetail:!1,testDetail:null,orfixed:!1},e.columns=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"teststandard"},{title:"\u5355\u4f4d",dataIndex:"unit"},{title:"\u53c2\u8003\u503c",dataIndex:"refervalue1"},{title:"\u6bd4\u8f83\u65b9\u6cd5",dataIndex:"calway1"},{title:"\u4e0a\u4e0b\u6d6e\u52a8",dataIndex:"rangevalue1"},{title:"\u5f3a\u5236",dataIndex:"orFixed"},{title:"\u64cd\u4f5c",render:function(t,a){return K.a.createElement(A["Fragment"],null,K.a.createElement("a",{onClick:function(){return e.modifyItem(t,a)}},"\u8bbe\u5b9a \xa0\xa0"))}}],e.columns2=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"teststandard"},{title:"\u5355\u4f4d",dataIndex:"unit"},{title:"\u53c2\u8003\u503c",dataIndex:"refervalue1"},{title:"\u6bd4\u8f83\u65b9\u6cd5",dataIndex:"calway1"},{title:"\u4e0a\u4e0b\u6d6e\u52a8",dataIndex:"rangevalue1"},{title:"\u5f3a\u5236",dataIndex:"orFixed"}],e.modifyItem=function(t){var a=e.props,n=a.dispatch,o=a.form,s=sessionStorage.getItem("cargoname");JSON.parse(localStorage.getItem("customs_userinfo"));n({type:"inspectionAnalysis/getTestStandard",payload:{cargoname:s,item:t.itemC}}),o.setFieldsValue(f()({},"refervalue1",t.refervalue1)),o.setFieldsValue(f()({},"rangevalue1",t.rangevalue1)),o.setFieldsValue(f()({},"calway1",t.calway1)),e.setState({testDetail:t}),"\u662f"===t.orFixed?e.setState({orfixed:!0}):e.setState({orfixed:!1}),e.setState({modify:!0})},e.modify=function(t){var a=e.state.testDetail,n=e.props,o=n.dispatch,s=n.form;o({type:"inspectionAnalysis/getDetailByKeyno",payload:{keyno:a.keyno},callback:function(t){if(200===t.code){var a=t.data;s.validateFields(function(t,n){t||(a.refervalue1=n.refervalue1,a.calway1=n.calway1,a.rangevalue1=n.rangevalue1,o({type:"inspectionAnalysis/modifyDetail",payload:a,callback:function(t){200===t.code?(g["a"].open({message:"\u4fee\u6539\u6210\u529f"}),e.componentDidMount()):g["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:t.message})}}))}),s.resetFields(),e.setState({modify:!1})}else g["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:t.message})}})},e.deleteOne=function(t){u["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\u6b64\u6307\u6807\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var a=e.props.dispatch;a({type:"inspectionAnalysis/deleteDetailItem",payload:{keyno:t.keyno},callback:function(t){200===t.code?(e.componentDidMount(),g["a"].open({message:"\u5220\u9664\u6210\u529f"})):g["a"].open({message:"\u5220\u9664\u5931\u8d25",description:t.data})}})}})},e.deleteItem=function(t){var a=e.props.dispatch,n=[];n.push(t.keyno),a({type:"inspectionAnalysis/deleteDetails",payload:{deleteRowKeys:n},callback:function(t){200===t.code?(e.componentDidMount(),g["a"].open({message:"\u5220\u9664\u6210\u529f"})):g["a"].open({message:"\u5220\u9664\u5931\u8d25",description:t.data})}})},e.loadItem=function(t){var a=e.props.dispatch,n=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("sampleno"),s=sessionStorage.getItem("cargoname");a({type:"inspectionAnalysis/loadDetails",payload:{targetReportNo:n,targetSampleNo:o,sourceReportNo:t.reportno,sourceSampleNo:t.sampleno,cargonameC:s},callback:function(t){200===t.code?(e.componentDidMount(),g["a"].open({message:"\u5bfc\u5165\u6210\u529f"})):g["a"].open({message:"\u5bfc\u5165\u5931\u8d25",description:t.message})}}),e.handleCancel()},e.detailItem=function(t){var a=e.props.dispatch,n=t.reportno,o=t.sampleno;a({type:"inspectionAnalysis/getDetails",payload:{reportno:n,sampleno:o}}),e.setState({onDetail:!0})},e.columns3=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"standard"},{title:"\u5355\u4f4d",dataIndex:"unit"},{title:"\u53c2\u8003\u503c",dataIndex:"refervalue1"},{title:"\u6bd4\u8f83\u65b9\u6cd5",dataIndex:"calway1"},{title:"\u4e0a\u4e0b\u6d6e\u52a8",dataIndex:"rangevalue1"},{title:"\u662f\u5426\u5f3a\u5236",dataIndex:"orFixed"}],e.back=function(){O.a.push({pathname:"/Main/SampleIndex"})},e.handleCancel=function(){e.setState({modify:!1}),e.setState({addMany:!1}),e.setState({onDelete:!1}),e.setState({onLoad:!1}),e.componentDidMount()},e.handleCancelDetail=function(){e.setState({onDetail:!1})},e.showAddMany=function(){var t=e.props,a=t.dispatch,n=(t.form,sessionStorage.getItem("reportno")),o=sessionStorage.getItem("sampleno"),s=sessionStorage.getItem("cargoname");e.setState({addMany:!0}),a({type:"inspectionAnalysis/getItems",payload:{reportno:n,sampleno:o,cargonameC:s}}),e.setState({selectedRowKeys:[]})},e.showDelete=function(){e.setState({onDelete:!0}),e.setState({deleteRowKeys:[]})},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.onDeleteChange=function(t){e.setState({deleteRowKeys:t})},e.delete=function(){var t=e.state.deleteRowKeys,a=e.props.dispatch;a({type:"inspectionAnalysis/deleteDetails",payload:{deleteRowKeys:t},callback:function(t){200===t.code?(e.componentDidMount(),g["a"].open({message:"\u5220\u9664\u6210\u529f"})):g["a"].open({message:"\u5220\u9664\u5931\u8d25",description:t.data})}}),e.setState({onDelete:!1})},e.handleChange=function(t){var a=e.props,n=a.dispatch,o=a.form,s=sessionStorage.getItem("cargoname");n({type:"inspectionAnalysis/getStandards",payload:{itemC:t,cargonameC:s},callback:function(t){e.setState({standard:t.data})}}),o.setFieldsValue({standard:null})},e.addMany=function(){var t=sessionStorage.getItem("reportno"),a=sessionStorage.getItem("sampleno"),n=sessionStorage.getItem("cargoname"),o=e.state.selectedRowKeys,s=e.props,l=s.dispatch;s.inspectionAnalysis.items;l({type:"inspectionAnalysis/addDetails",payload:{reportno:t,sampleno:a,cargonameC:n,selectedRowKeys:o},callback:function(t){200===t.code?(g["a"].open({message:"\u6dfb\u52a0\u6210\u529f"}),e.componentDidMount()):g["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data})}}),e.setState({addMany:!1})},e.showLoad=function(){e.setState({onLoad:!0});var t=sessionStorage.getItem("applicant"),a=sessionStorage.getItem("cargoname"),n=sessionStorage.getItem("SampleIndex_certCode"),o=e.props.dispatch;o({type:"inspectionAnalysis/getSamplesByFilter",payload:{kind:"applicant",value:t,cargoname:a,certCode:n}})},e}return I()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=sessionStorage.getItem("reportno"),a=sessionStorage.getItem("sampleno");e({type:"inspectionAnalysis/getAllDetails",payload:{reportno:t,sampleno:a}})}},{key:"render",value:function(){var e=this.props,t=e.inspectionAnalysis,a=t.detail,n=t.items,o=t.reportSample,s=t.details,g=t.testStandards,y=e.loading,f=e.form.getFieldDecorator,h=this.state,v=h.addMany,S=h.onDelete,I=h.selectedRowKeys,E=h.standard,w=h.itemName,C=h.deleteRowKeys,k=h.onLoad,x=h.onDetail,D=h.modify,A=(g.map(function(e){return K.a.createElement($,{key:e.standard,value:e.standard},e.standard)}),sessionStorage.getItem("reportno")),M=sessionStorage.getItem("cargoname"),F=sessionStorage.getItem("sampleno"),O=sessionStorage.getItem("applicant"),N={reportno:A,cargoname:M,sampleno:F,applicant:O},J=(E.map(function(e){return K.a.createElement($,{key:e,value:e},e)}),w.map(function(e){return K.a.createElement($,{key:e,value:e},e)}),{selectedRowKeys:I,onChange:this.onSelectChange}),B={deleteRowKeys:C,onChange:this.onDeleteChange};return K.a.createElement(z["a"],{text:N},K.a.createElement(l["a"],{bordered:!1},K.a.createElement(c["a"],null,K.a.createElement(p["a"],{sm:22}),K.a.createElement(p["a"],{span:2},K.a.createElement(d["a"],{type:"primary",style:{marginLeft:8,paddingLeft:0,paddingRight:15,marginBottom:5},onClick:this.back},K.a.createElement(m["a"],{type:"left"}),"\u8fd4\u56de"))),K.a.createElement("div",{className:L.a.tableList},K.a.createElement(r["a"],{size:"middle",loading:y,dataSource:a,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns,rowKey:"reportno"})),K.a.createElement(u["a"],{title:"\u6279\u91cf\u6dfb\u52a0",visible:v,onOk:this.addMany,onCancel:this.handleCancel,width:1e3,okText:"\u6dfb\u52a0"},K.a.createElement(r["a"],{size:"middle",rowKey:"keyno",loading:y,dataSource:n,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns3,rowSelection:J})),K.a.createElement(u["a"],{title:"\u5220\u9664",visible:S,onOk:this.delete,onCancel:this.handleCancel,width:1e3,okText:"\u5220\u9664"},K.a.createElement(r["a"],{size:"middle",rowKey:"keyno",loading:y,dataSource:a,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns2,rowSelection:B})),K.a.createElement(u["a"],{title:"\u5bfc\u5165",visible:k,onOk:this.handleCancel,onCancel:this.handleCancel,width:1e3},K.a.createElement("div",{className:L.a.tableListForm},K.a.createElement(ee,{applicant:O,cargoname:M})),K.a.createElement(r["a"],{size:"middle",rowKey:"keyno",loading:y,dataSource:o,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns1})),K.a.createElement(u["a"],{title:"\u8bbe\u5b9a\u76d1\u7ba1\u8981\u6c42",visible:D,onOk:this.modify,onCancel:this.handleCancel,width:400},K.a.createElement(b["a"],null,K.a.createElement(b["a"].Item,{label:"\u53c2\u8003\u503c"},f("refervalue1",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6570\u503c"}]})(K.a.createElement(i["a"],{disabled:this.state.orfixed}))),K.a.createElement(b["a"].Item,{label:"\u6bd4\u8f83\u65b9\u6cd5"},f("calway1",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u6bd4\u8f83\u65b9\u6cd5"}]})(K.a.createElement(R["a"],{placeholder:"\u8bf7\u9009\u62e9\u6bd4\u8f83\u65b9\u6cd5",disabled:this.state.orfixed},K.a.createElement($,{value:"\u5c0f\u4e8e"},"\u5c0f\u4e8e"),K.a.createElement($,{value:"\u5c0f\u4e8e\u7b49\u4e8e"},"\u5c0f\u4e8e\u7b49\u4e8e"),K.a.createElement($,{value:"\u5927\u4e8e"},"\u5927\u4e8e"),K.a.createElement($,{value:"\u5927\u4e8e\u7b49\u4e8e"},"\u5927\u4e8e\u7b49\u4e8e"),K.a.createElement($,{value:"\u7b49\u4e8e"},"\u7b49\u4e8e"),K.a.createElement($,{value:"\u8303\u56f4\u5185"},"\u8303\u56f4\u5185")))),K.a.createElement(b["a"].Item,{label:"\u5141\u8bb8\u6d6e\u52a8"},f("rangevalue1",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6570\u503c"}]})(K.a.createElement(i["a"],{disabled:this.state.orfixed}))))),K.a.createElement(u["a"],{title:"\u6307\u6807\u8be6\u60c5",visible:x,onCancel:this.handleCancelDetail,footer:null,width:900},K.a.createElement(r["a"],{size:"middle",rowKey:"keyno",loading:y,dataSource:s,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns3}))))}}]),a}(A["PureComponent"]),_=H))||_)||_);t["default"]=te}}]);