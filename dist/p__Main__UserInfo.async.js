(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{qNhZ:function(e,a,t){"use strict";t.r(a);t("IzEo");var s,r,o,l,n=t("bx4M"),i=t("jehZ"),c=t.n(i),d=(t("Q9mQ"),t("diRs")),p=(t("+L6B"),t("2/Rp")),m=(t("7Kak"),t("9yH6")),u=(t("MXD1"),t("CFYs")),f=(t("miYZ"),t("tsqr")),g=(t("/xke"),t("TeRw")),h=t("p0pE"),b=t.n(h),v=t("2Taf"),w=t.n(v),y=t("vZ4D"),E=t.n(y),O=t("MhPg"),S=t.n(O),V=t("l4Ni"),C=t.n(V),P=t("ujKo"),F=t.n(P),k=(t("2qtc"),t("kLXV")),I=(t("5NDa"),t("5rEg")),M=(t("y8nQ"),t("Vl3Y")),N=t("q1tI"),q=t.n(N),D=t("MuoO"),j=t("Y2fQ"),R=(t("zHco"),t("sFZ6")),x=t.n(R);t("wd/R");function J(e){return function(){var a,t=F()(e);if(L()){var s=F()(this).constructor;a=Reflect.construct(t,arguments,s)}else a=t.apply(this,arguments);return C()(this,a)}}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _={ok:q.a.createElement("div",{className:x.a.success},q.a.createElement(j["FormattedMessage"],{id:"validation.password.strength.strong"})),pass:q.a.createElement("div",{className:x.a.warning},q.a.createElement(j["FormattedMessage"],{id:"validation.password.strength.medium"})),poor:q.a.createElement("div",{className:x.a.error},q.a.createElement(j["FormattedMessage"],{id:"validation.password.strength.short"}))},T={ok:"success",pass:"normal",poor:"exception"},Z=M["a"].create()(function(e){var a=e.form,t=e.handleOld,s=e.handleOldPasswordVisible,r=e.OldPasswordVisible,o=function(){a.validateFields(function(e,s){e||(a.resetFields(),t(s))})},l=function(e,t,s){t&&t!==a.getFieldValue("oldpassword")?s("\u5bc6\u7801\u4e0d\u4e00\u81f4"):s()};return q.a.createElement(k["a"],{title:"\u786e\u8ba4\u539f\u5bc6\u7801",style:{top:100},visible:r,onOk:o,onCancel:function(){return s()}},q.a.createElement(M["a"].Item,{labelCol:{span:5},wrapperCol:{span:15},label:"\u539f\u5bc6\u7801"},a.getFieldDecorator("oldpassword",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u539f\u5bc6\u7801"}]})(q.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u539f\u5bc6\u7801",type:"password"}))),q.a.createElement(M["a"].Item,{labelCol:{span:5},wrapperCol:{span:15},label:"\u786e\u8ba4\u539f\u5bc6\u7801"},a.getFieldDecorator("oldconfirm",{rules:[{required:!0,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u539f\u5bc6\u7801"},{validator:l}]})(q.a.createElement(I["a"],{placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u539f\u5bc6\u7801",type:"password"}))))}),A=(s=M["a"].create(),r=Object(D["connect"])(function(e){var a=e.register,t=e.loading;return{register:a,loading:t.models.register}}),s(o=r((l=function(e){S()(t,e);var a=J(t);function t(){var e;w()(this,t);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return e=a.call.apply(a,[this].concat(r)),e.state={count:0,user:{},parents:[],help:"",visible:!1,passwordVisible:!1,phoneVisible:!1,OldPasswordVisible:!1},e.handleSubmit=function(){var a=e.props,t=a.form,s=a.dispatch,r=t.validateFieldsAndScroll,o=JSON.parse(localStorage.getItem("customs_userinfo"));r(function(a,r){console.log(a),a||(o.company=t.getFieldValue("company"),o.tel=t.getFieldValue("tel"),o.isvisible=t.getFieldValue("isvisible"),s({type:"register/updateCustomsUser",payload:b()({},o),callback:function(a){200===a.code?(g["a"].open({message:"\u4fee\u6539\u6210\u529f"}),localStorage.setItem("customs_userinfo",JSON.stringify(o)),e.componentDidMount()):g["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:a.data})}}))})},e.modifyPassword=function(){var a=e.props,t=a.form,s=a.dispatch,r=t.validateFieldsAndScroll,o=JSON.parse(localStorage.getItem("customs_userinfo"));r(function(a,r){a||(o.password=t.getFieldValue("password"),s({type:"register/updateCustomsUser",payload:b()({},o),callback:function(a){200===a.code?(g["a"].open({message:"\u4fee\u6539\u6210\u529f"}),e.setState({passwordVisible:!1}),localStorage.setItem("customs_userinfo",JSON.stringify(o)),e.componentDidMount()):g["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:a.data})}}))})},e.modifyPhone=function(){var a=e.props,t=a.form,s=a.dispatch,r=t.validateFieldsAndScroll,o=JSON.parse(localStorage.getItem("customs_userinfo"));r(function(a,r){a||(o.tel=t.getFieldValue("tel"),s({type:"register/verifyTel",payload:{tel:r.tel,verifyCode:r.captcha},callback:function(a){"success"===a?s({type:"register/updateCustomsUser",payload:b()({},o),callback:function(a){200===a.code?(g["a"].open({message:"\u4fee\u6539\u6210\u529f"}),e.setState({phoneVisible:!1}),localStorage.setItem("customs_userinfo",JSON.stringify(o)),e.componentDidMount()):g["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:a.data})}}):f["a"].error("\u9a8c\u8bc1\u7801\u9519\u8bef")}}))})},e.checkPassword=function(a,t,s){!1===e.state.passwordVisible&&s();var r=e.state,o=r.visible,l=r.confirmDirty;if(t)if(e.setState({help:""}),o||e.setState({visible:!!t}),t.length<6)s("error");else{var n=e.props.form;t&&l&&n.validateFields(["confirm"],{force:!0}),s()}else e.setState({help:"\u8bf7\u8f93\u5165\u5bc6\u7801",visible:!!t}),s("error")},e.checkConfirm=function(a,t,s){var r=e.props.form;t&&t!==r.getFieldValue("password")?s("\u5bc6\u7801\u4e0d\u4e00\u81f4"):s()},e.showPassword=function(){e.handleOldPasswordVisible(!0)},e.handleCancel=function(){e.setState({passwordVisible:!1}),e.setState({phoneVisible:!1})},e.handleOldPasswordVisible=function(a){e.setState({OldPasswordVisible:!!a})},e.getPasswordStatus=function(){var a=e.props.form,t=a.getFieldValue("password");return t&&t.length>9?"ok":t&&t.length>5?"pass":"poor"},e.onGetCaptcha=function(){var a=59;e.setState({count:a}),e.interval=setInterval(function(){a-=1,e.setState({count:a}),0===a&&clearInterval(e.interval)},1e3);var t=e.props,s=t.form,r=t.dispatch,o=s.getFieldValue("tel");void 0===o?f["a"].success("\u7535\u8bdd\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a"):r({type:"register/sendVerify",payload:{tel:o},callback:function(e){e&&("success"===e?f["a"].success("\u53d1\u9001\u6210\u529f"):k["a"].info({title:Object(j["formatMessage"])({id:"app.login.verification-code-warning.noExist"})}))}})},e.getRepeatTel=function(a,t,s){var r=e.props.dispatch;r({type:"register/getRepeatTel",payload:{tel:t},callback:function(e){void 0===e||"null"===e?s("\u53f7\u7801\u5df2\u6ce8\u518c"):"\u53f7\u7801\u5df2\u6ce8\u518c"===e?s("\u53f7\u7801\u5df2\u6ce8\u518c"):s()}})},e.showModifyPhone=function(){e.setState({phoneVisible:!0})},e.renderPasswordProgress=function(){var a=e.props.form,t=a.getFieldValue("password"),s=e.getPasswordStatus();return t&&t.length?q.a.createElement("div",{className:x.a["progress-".concat(s)]},q.a.createElement(u["a"],{status:T[s],className:x.a.progress,strokeWidth:6,percent:10*t.length>100?100:10*t.length,showInfo:!1})):null},e.handleOld=function(a){var t=JSON.parse(localStorage.getItem("customs_userinfo"));a.oldpassword===t.password?e.setState({passwordVisible:!0}):f["a"].error("\u60a8\u7684\u539f\u5bc6\u7801\u786e\u8ba4\u9519\u8bef"),e.handleOldPasswordVisible(!1)},e}return E()(t,[{key:"componentDidMount",value:function(){var e=this.props,a=(e.dispatch,e.form),t=JSON.parse(localStorage.getItem("customs_userinfo"));this.setState({user:t}),a.setFieldsValue({company:t.company,isvisible:t.isvisible,tel:t.tel,nameC:t.nameC})}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator,t={labelCol:{span:6},wrapperCol:{span:14}},s=this.state,r=s.user,o=s.help,l=s.visible,i=s.passwordVisible,u=s.phoneVisible,f=s.count,g=s.OldPasswordVisible,h={handleOldPasswordVisible:this.handleOldPasswordVisible,handleOld:this.handleOld};return q.a.createElement(n["a"],null,q.a.createElement(M["a"],t,q.a.createElement(M["a"].Item,{label:"\u7528\u6237\u540d"},q.a.createElement("span",{className:"ant-form-text"},r.username)),q.a.createElement(M["a"].Item,{label:"\u96b6\u5c5e\u6d77\u5173\uff1a"},q.a.createElement("span",{className:"ant-form-text"},r.company)),q.a.createElement(M["a"].Item,{label:"\u624b\u673a\u53f7\u7801\uff1a"},q.a.createElement("span",{className:"ant-form-text"},r.tel),q.a.createElement(N["Fragment"],null,q.a.createElement("a",{onClick:function(){return e.showModifyPhone()}},"\xa0\xa0\u4fee\u6539\u624b\u673a"))),q.a.createElement(M["a"].Item,{label:"\u8054\u7cfb\u65b9\u5f0f:"},a("isvisible",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u662f\u5426\u53ef\u89c1"}]})(q.a.createElement(m["a"].Group,null,q.a.createElement(m["a"],{value:"\u53ef\u89c1"},"\u53ef\u89c1"),q.a.createElement(m["a"],{value:"\u4e0d\u53ef\u89c1"},"\u4e0d\u53ef\u89c1")))),q.a.createElement(M["a"].Item,{label:"\u59d3\u540d\uff1a"},a("nameC",{rules:[{required:!0,message:Object(j["formatMessage"])({id:"validation.company.required"})}]})(q.a.createElement(I["a"],{placeholder:Object(j["formatMessage"])({id:"form.company.placeholder"})}))),q.a.createElement(M["a"].Item,{wrapperCol:{span:12,offset:6}},q.a.createElement(p["a"],{type:"primary",onClick:this.showPassword},"\u4fee\u6539\u5bc6\u7801"),"\xa0\xa0\xa0\xa0\xa0\xa0",q.a.createElement(p["a"],{type:"primary",onClick:this.handleSubmit},"\u4fdd\u5b58")),q.a.createElement(k["a"],{title:"\u8bbe\u7f6e\u65b0\u5bc6\u7801",visible:i,onOk:this.modifyPassword,onCancel:this.handleCancel},q.a.createElement(M["a"].Item,{label:"\u65b0\u5bc6\u7801:",help:o},q.a.createElement(d["a"],{getPopupContainer:function(e){return e.parentNode},content:q.a.createElement("div",{style:{padding:"4px 0"}},_[this.getPasswordStatus()],this.renderPasswordProgress(),q.a.createElement("div",{style:{marginTop:10}},q.a.createElement(j["FormattedMessage"],{id:"validation.password.strength.msg"}))),overlayStyle:{width:240},placement:"right",visible:l},a("password",{rules:[{validator:this.checkPassword}]})(q.a.createElement(I["a"],{type:"password",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})))),q.a.createElement(M["a"].Item,{label:"\u786e\u8ba4\u65b0\u5bc6\u7801:"},a("confirm",{rules:[i?[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"}]:[],{validator:this.checkConfirm}]})(q.a.createElement(I["a"],{type:"password",placeholder:"\u8bf7\u786e\u8ba4\u8f93\u5165\u65b0\u5bc6\u7801"})))),q.a.createElement(k["a"],{title:"\u4fee\u6539\u624b\u673a",visible:u,onOk:this.modifyPhone,onCancel:this.handleCancel},q.a.createElement(M["a"].Item,{label:"\u624b\u673a\u53f7:"},a("tel",{rules:[{required:!0,message:Object(j["formatMessage"])({id:"validation.phone-number.required"})},{pattern:/^\d{11}$/,message:Object(j["formatMessage"])({id:"validation.phone-number.wrong-format"})},{validator:this.getRepeatTel}]})(q.a.createElement(I["a"],{style:{width:"75%"},placeholder:Object(j["formatMessage"])({id:"form.phone-number.placeholder"})}))),q.a.createElement(M["a"].Item,{label:"\u9a8c\u8bc1\u7801:"},a("captcha",{rules:u?[{required:!0,message:Object(j["formatMessage"])({id:"validation.verification-code.required"})}]:[]})(q.a.createElement(I["a"],{style:{width:"50%"},placeholder:Object(j["formatMessage"])({id:"form.verification-code.placeholder"})})),q.a.createElement(p["a"],{disabled:f,className:x.a.getCaptcha,onClick:this.onGetCaptcha},f?"".concat(f," s"):Object(j["formatMessage"])({id:"app.register.get-verification-code"}))))),q.a.createElement(Z,c()({},h,{OldPasswordVisible:g})))}}]),t}(N["PureComponent"]),o=l))||o)||o);a["default"]=A},sFZ6:function(e,a,t){e.exports={tableList:"antd-pro-pages-main-user-info-tableList",tableListOperator:"antd-pro-pages-main-user-info-tableListOperator",tableListForm:"antd-pro-pages-main-user-info-tableListForm",submitButtons:"antd-pro-pages-main-user-info-submitButtons"}}}]);