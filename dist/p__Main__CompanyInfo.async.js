(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"6hWX":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,c,o,r,l=a("bx4M"),i=(a("g9YV"),a("wCAj")),s=(a("14J3"),a("BMrR")),p=(a("+L6B"),a("2/Rp")),d=(a("jCWc"),a("kPKH")),u=a("d6i3"),m=a.n(u),f=a("1l/V"),y=a.n(f),g=(a("miYZ"),a("tsqr")),b=(a("2qtc"),a("kLXV")),v=(a("/xke"),a("TeRw")),h=a("p0pE"),w=a.n(h),k=a("2Taf"),E=a.n(k),V=a("vZ4D"),x=a.n(V),S=a("MhPg"),C=a.n(S),I=a("l4Ni"),M=a.n(I),F=a("ujKo"),R=a.n(F),D=(a("y8nQ"),a("Vl3Y")),Y=(a("OaEy"),a("2fM7")),L=a("q1tI"),O=a.n(L),P=a("MuoO"),j=(a("Y2fQ"),a("wd/R")),B=a.n(j);a("zHco"),a("iV4w");function z(e){return function(){var t,a=R()(e);if(N()){var n=R()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return M()(this,t)}}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var T=Y["a"].Option,q=(n=D["a"].create(),c=Object(P["connect"])(function(e){var t=e.company,a=e.loading;return{company:t,loading:a.models.company}}),n(o=c((r=function(e){C()(a,e);var t=z(a);function a(){var e;E()(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c)),e.state={company:{},parents:[],modifyModalVisble:!1,previewVisible:!1,previewImage:"",fileList:[],dataSource:[]},e.columns=[{title:"\u6587\u4ef6\u540d\u79f0",dataIndex:"recordname",render:function(e){var t=/\.{1}[a-z]{1,}$/;return null!==t.exec(e)?O.a.createElement("span",null,e.slice(0,t.exec(e).index)):O.a.createElement("span",null,e)}},{title:"\u4e0a\u4f20\u65e5\u671f",dataIndex:"createtime",render:function(e){return O.a.createElement("span",null,B()(e).format("YYYY-MM-DD"))}},{title:"\u4e0a\u4f20\u4eba",dataIndex:"creator"},{title:"\u64cd\u4f5c",render:function(t,a){return O.a.createElement(L["Fragment"],null,O.a.createElement("a",{onClick:function(){return e.previewItem(t,a)}},"\u67e5\u770b")," \xa0\xa0")}}],e.init=function(){var t=e.props,a=t.dispatch,n=t.form,c=sessionStorage.getItem("companyusermanage_certcode");a({type:"company/getCompany",payload:{certCode:c},callback:function(t){200===t.code&&(e.setState({company:t.data}),n.setFieldsValue({namee:t.data.namee,adres:t.data.adres,account:t.data.account,bank:t.data.bank,belongto:t.data.belongto,cocode:t.data.cocode}))}}),a({type:"company/getParent",payload:{certCode:c},callback:function(t){200===t.code&&e.setState({parents:t.data})}}),a({type:"company/getRecordCompanyList",payload:{certCode:c},callback:function(t){200===t.code&&e.setState({dataSource:t.data})}})},e.handleSubmit=function(){var t=e.props,a=t.form,n=t.dispatch,c=a.validateFieldsAndScroll,o=e.state.company;c(function(t,c){t||(o.namee=a.getFieldValue("namee"),o.adres=a.getFieldValue("adres"),o.account=a.getFieldValue("account"),o.bank=a.getFieldValue("bank"),o.belongto=a.getFieldValue("belongto"),o.cocode=a.getFieldValue("cocode"),n({type:"company/updateCompany",payload:w()({},o),callback:function(t){200===t.code?(v["a"].open({message:"\u4fee\u6539\u6210\u529f"}),e.componentDidMount()):v["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data})}}))})},e.previewItem=function(t){var a=e.props.dispatch;a({type:"company/getUrl",payload:{url:t.osspath},callback:function(e){if(400===e.code)v["a"].open({message:"\u6253\u5f00\u5931\u8d25",description:e.data});else{var t=e.data;window.open(t)}}})},e.deleteItem=function(t){b["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\u6b64\u6587\u4ef6\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var a=e.props.dispatch;a({type:"company/deleteRecordCompany",payload:t,callback:function(t){console.log(t),"success"===t?(g["a"].success("\u5220\u9664\u6210\u529f"),e.init()):g["a"].error("\u5220\u9664\u5931\u8d25")}})}})},e.handleModifyModalVisble=function(t){e.setState({modifyModalVisble:!!t})},e.openModal=function(){e.setState({modifyModalVisble:!0})},e.Cancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=y()(m.a.mark(function t(a){return m.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a.url||a.preview){t.next=4;break}return t.next=3,getBase64(a.originFileObj);case 3:a.preview=t.sent;case 4:e.setState({previewImage:a.url||a.preview,previewVisible:!0});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.setStateFileList=function(t){e.setState({fileList:t})},e.handleBeforeUpload=function(e){return!1},e.back=function(){e.props.history.goBack()},e}return x()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var e=this.props.loading,t=(this.props.form.getFieldDecorator,{labelCol:{span:6},wrapperCol:{span:14}}),a=this.state,n=a.company,c=a.parents,o=a.dataSource;c.map(function(e){return O.a.createElement(T,{key:e.certcode,value:e.certcode},e.namec)});return O.a.createElement(l["a"],null,O.a.createElement(s["a"],null,O.a.createElement(d["a"],{span:22}),O.a.createElement(d["a"],{span:2},O.a.createElement(p["a"],{type:"primary",style:{marginLeft:8},onClick:this.back},"\u8fd4\u56de"))),O.a.createElement(D["a"],t,O.a.createElement(D["a"].Item,{label:"\u516c\u53f8\u540d\u79f0"},O.a.createElement("span",{className:"ant-form-text"},n.namec)),O.a.createElement(D["a"].Item,{label:"\u6ce8\u518c\u5730\u5740"},O.a.createElement("span",{className:"ant-form-text"},n.adres)),O.a.createElement(D["a"].Item,{label:"\u793e\u4f1a\u7edf\u4e00\u4fe1\u7528\u4ee3\u7801"},O.a.createElement("span",{className:"ant-form-text"},n.cocode)),O.a.createElement(D["a"].Item,{label:"\u76f8\u5173\u8d44\u6599"},O.a.createElement("span",null,"\u8425\u4e1a\u6267\u7167\u3001\u8d44\u8d28\u8bc1\u4e66\u7b49")),O.a.createElement(D["a"].Item,{wrapperCol:{span:14,offset:6}},O.a.createElement("div",{style:{width:"100%"}},O.a.createElement(i["a"],{size:"middle",loading:e,dataSource:o,columns:this.columns,rowKey:"recordname"})))))}}]),a}(L["PureComponent"]),o=r))||o)||o);t["default"]=q}}]);