(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"6hWX":function(e,a,t){"use strict";t.r(a);t("IzEo");var n,o,c,r,l=t("bx4M"),i=(t("g9YV"),t("wCAj")),s=(t("14J3"),t("BMrR")),d=(t("+L6B"),t("2/Rp")),p=(t("jCWc"),t("kPKH")),m=t("d6i3"),u=t.n(m),f=t("1l/V"),y=t.n(f),g=(t("miYZ"),t("tsqr")),b=(t("2qtc"),t("kLXV")),w=(t("/xke"),t("TeRw")),v=t("p0pE"),h=t.n(v),k=t("2Taf"),E=t.n(k),V=t("vZ4D"),x=t.n(V),C=t("l4Ni"),I=t.n(C),S=t("ujKo"),M=t.n(S),F=t("MhPg"),Y=t.n(F),L=(t("y8nQ"),t("Vl3Y")),D=(t("OaEy"),t("2fM7")),O=t("q1tI"),R=t.n(O),j=t("MuoO"),B=(t("Y2fQ"),t("wd/R")),P=t.n(B),z=(t("zHco"),t("iV4w"),D["a"].Option),N=(n=L["a"].create(),o=Object(j["connect"])(function(e){var a=e.company,t=e.loading;return{company:a,loading:t.models.company}}),n(c=o((r=function(e){function a(){var e,t;E()(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return t=I()(this,(e=M()(a)).call.apply(e,[this].concat(o))),t.state={company:{},parents:[],modifyModalVisble:!1,previewVisible:!1,previewImage:"",fileList:[],dataSource:[]},t.columns=[{title:"\u6587\u4ef6\u540d\u79f0",dataIndex:"recordname",render:function(e){var a=/\.{1}[a-z]{1,}$/;return null!==a.exec(e)?R.a.createElement("span",null,e.slice(0,a.exec(e).index)):R.a.createElement("span",null,e)}},{title:"\u4e0a\u4f20\u65e5\u671f",dataIndex:"createtime",render:function(e){return R.a.createElement("span",null,P()(e).format("YYYY-MM-DD"))}},{title:"\u4e0a\u4f20\u4eba",dataIndex:"creator"},{title:"\u64cd\u4f5c",render:function(e,a){return R.a.createElement(O["Fragment"],null,R.a.createElement("a",{onClick:function(){return t.previewItem(e,a)}},"\u67e5\u770b")," \xa0\xa0")}}],t.init=function(){var e=t.props,a=e.dispatch,n=e.form,o=sessionStorage.getItem("companyusermanage_certcode");a({type:"company/getCompany",payload:{certCode:o},callback:function(e){200===e.code&&(t.setState({company:e.data}),n.setFieldsValue({namee:e.data.namee,adres:e.data.adres,account:e.data.account,bank:e.data.bank,belongto:e.data.belongto,cocode:e.data.cocode}))}}),a({type:"company/getParent",payload:{certCode:o},callback:function(e){200===e.code&&t.setState({parents:e.data})}}),a({type:"company/getRecordCompanyList",payload:{certCode:o},callback:function(e){200===e.code&&t.setState({dataSource:e.data})}})},t.handleSubmit=function(){var e=t.props,a=e.form,n=e.dispatch,o=a.validateFieldsAndScroll,c=t.state.company;o(function(e,o){e||(c.namee=a.getFieldValue("namee"),c.adres=a.getFieldValue("adres"),c.account=a.getFieldValue("account"),c.bank=a.getFieldValue("bank"),c.belongto=a.getFieldValue("belongto"),c.cocode=a.getFieldValue("cocode"),n({type:"company/updateCompany",payload:h()({},c),callback:function(e){200===e.code?(w["a"].open({message:"\u4fee\u6539\u6210\u529f"}),t.componentDidMount()):w["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:e.data})}}))})},t.previewItem=function(e){var a=t.props.dispatch;a({type:"company/getUrl",payload:{url:e.osspath},callback:function(e){if(400===e.code)w["a"].open({message:"\u6253\u5f00\u5931\u8d25",description:e.data});else{var a=e.data;window.open(a)}}})},t.deleteItem=function(e){b["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\u6b64\u6587\u4ef6\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var a=t.props.dispatch;a({type:"company/deleteRecordCompany",payload:e,callback:function(e){console.log(e),"success"===e?(g["a"].success("\u5220\u9664\u6210\u529f"),t.init()):g["a"].error("\u5220\u9664\u5931\u8d25")}})}})},t.handleModifyModalVisble=function(e){t.setState({modifyModalVisble:!!e})},t.openModal=function(){t.setState({modifyModalVisble:!0})},t.Cancel=function(){return t.setState({previewVisible:!1})},t.handlePreview=function(){var e=y()(u.a.mark(function e(a){return u.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.url||a.preview){e.next=4;break}return e.next=3,getBase64(a.originFileObj);case 3:a.preview=e.sent;case 4:t.setState({previewImage:a.url||a.preview,previewVisible:!0});case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.setStateFileList=function(e){t.setState({fileList:e})},t.handleBeforeUpload=function(e){return!1},t.back=function(){t.props.history.goBack()},t}return Y()(a,e),x()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var e=this.props.loading,a=(this.props.form.getFieldDecorator,{labelCol:{span:6},wrapperCol:{span:14}}),t=this.state,n=t.company,o=t.parents,c=t.dataSource;o.map(function(e){return R.a.createElement(z,{key:e.certcode,value:e.certcode},e.namec)});return R.a.createElement(l["a"],null,R.a.createElement(s["a"],null,R.a.createElement(p["a"],{span:22}),R.a.createElement(p["a"],{span:2},R.a.createElement(d["a"],{type:"primary",style:{marginLeft:8},onClick:this.back},"\u8fd4\u56de"))),R.a.createElement(L["a"],a,R.a.createElement(L["a"].Item,{label:"\u516c\u53f8\u540d\u79f0"},R.a.createElement("span",{className:"ant-form-text"},n.namec)),R.a.createElement(L["a"].Item,{label:"\u6ce8\u518c\u5730\u5740"},R.a.createElement("span",{className:"ant-form-text"},n.adres)),R.a.createElement(L["a"].Item,{label:"\u793e\u4f1a\u7edf\u4e00\u4fe1\u7528\u4ee3\u7801"},R.a.createElement("span",{className:"ant-form-text"},n.cocode)),R.a.createElement(L["a"].Item,{label:"\u76f8\u5173\u8d44\u6599"},R.a.createElement("span",null,"\u8425\u4e1a\u6267\u7167\u3001\u8d44\u8d28\u8bc1\u4e66\u7b49")),R.a.createElement(L["a"].Item,{wrapperCol:{span:14,offset:6}},R.a.createElement("div",{style:{width:"100%"}},R.a.createElement(i["a"],{size:"middle",loading:e,dataSource:c,columns:this.columns,rowKey:"recordname"})))))}}]),a}(O["PureComponent"]),c=r))||c)||c);a["default"]=N}}]);